{"version":3,"sources":["webpack:///./src/views/partner/TourManagement.vue?f11d","webpack:///./src/views/partner/TourManagement.vue","webpack:///src/views/partner/TourManagement.vue"],"names":["partner_TourManagement","render","_vm","this","_h","$createElement","_c","_self","attrs","aria-label","staticClass","to","name","_v","aria-current","_m","_l","tours","tour","index","key","scope","_s","id","staticStyle","width","params","tourId","tour_name","from_place","to_place","number_days","number_persons","_f","tour_price","tour_cate","cate_name","is_active","type","fetchNameCheck","domProps","checked","on","change","$event","onChangeStatus","for","href","click","onClickDateDeparture","onClickDeleteTour","page-count","last_page","click-handler","clickPaginate","prev-text","next-text","container-class","page-class","page-link-class","prev-class","prev-link-class","next-class","next-link-class","slot","closeModalDelete","submitDelete","role","aria-hidden","_e","data-dismiss","overflow-y","date","date_departure","float","cursor","deleteDate","disabled-dates","disabledDates","bootstrap-styling","language","vi","monday-first","inline","selected","selectDate","model","value","callback","$$v","dateDeparture","expression","staticRenderFns","colspan","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","TourManagement","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_6_moment___default","a","locale","data","__WEBPACK_IMPORTED_MODULE_5_vuejs_datepicker_dist_locale__","Date","loadingButton","created","__WEBPACK_IMPORTED_MODULE_4__store__","dispatch","computed","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default","Object","__WEBPACK_IMPORTED_MODULE_3_vuex__","methods","dateFormatter","format","e","_this","vm","$nextTick","i","dates","length","date_departure_code","tour_id","DATE_CREATE","_this2","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","mark","_callee","wrap","_context","prev","next","DATES_FETCH","$","modal","stop","DATE_DELETE","pageNum","TOURS_PAGINATE","x","payload","isActive","target","TOUR_BLOCK","TOUR_DELETE","$toast","success","color","title","message"],"mappings":"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","file":"static/js/6.56a8d42547d280bf0bbd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('nav',{attrs:{\"aria-label\":\"breadcrumb\"}},[_c('ol',{staticClass:\"breadcrumb\"},[_c('li',{staticClass:\"breadcrumb-item\"},[_c('router-link',{staticClass:\"text-secondary\",attrs:{\"to\":{ name: 'Home' }}},[_vm._v(\"Home\")])],1),_vm._v(\" \"),_c('li',{staticClass:\"breadcrumb-item active\",attrs:{\"aria-current\":\"page\"}},[_vm._v(\"Quản lý tour\")]),_vm._v(\" \"),_c('li',{staticClass:\"ml-auto\"},[_c('router-link',{staticClass:\"text-info\",attrs:{\"to\":{ name: 'Create Tour' }}},[_vm._v(\"Thêm\")])],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(\"Danh sách tour\")]),_vm._v(\" \"),_c('table',{staticClass:\"table table-hover\"},[_c('caption',[_vm._v(\"\\n          List of tour\\n        \")]),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('tbody',[(_vm.isLoading)?_c('tr',{staticClass:\"text-center\"},[_vm._m(1)]):_vm._l((_vm.tours.data),function(tour,index){return _c('tr',{key:index},[_c('th',{attrs:{\"scope\":\"row\"}},[_vm._v(_vm._s(tour.id))]),_vm._v(\" \"),_c('td',[_c('router-link',{staticClass:\"text-truncate\",staticStyle:{\"width\":\"200px\"},attrs:{\"to\":{ name: 'Tour Detail', params: { tourId: tour.id } }}},[_vm._v(\"\\n                \"+_vm._s(tour.tour_name)+\"\\n              \")])],1),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(tour.from_place))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(tour.to_place))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(tour.number_days))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(tour.number_persons))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm._f(\"myCurrency\")(tour.tour_price))+\" đ\")]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(tour.tour_cate.cate_name))]),_vm._v(\" \"),_c('td',[(tour.is_active === 1)?_c('span',{staticClass:\"badge badge-success\"},[_vm._v(\"Active\")]):_c('span',{staticClass:\"badge badge-danger\"},[_vm._v(\"Blocked\")])]),_vm._v(\" \"),_c('td',[_c('div',{staticClass:\"custom-control custom-checkbox\"},[_c('input',{staticClass:\"custom-control-input\",attrs:{\"type\":\"checkbox\",\"id\":_vm.fetchNameCheck(tour)},domProps:{\"checked\":tour.is_active === 1},on:{\"change\":function($event){return _vm.onChangeStatus($event, tour)}}}),_vm._v(\" \"),_c('label',{staticClass:\"custom-control-label\",attrs:{\"for\":_vm.fetchNameCheck(tour)}})])]),_vm._v(\" \"),_c('td',{staticClass:\"text-center\"},[_c('a',{staticClass:\"btn btn-outline-secondary\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.onClickDateDeparture(tour.id)}}},[_c('i',{staticClass:\"far fa-calendar-alt\"})]),_vm._v(\" \"),_c('router-link',{staticClass:\"text-info btn-link ml-1 mx-2\",attrs:{\"to\":{ name: 'Edit Tour', params: { tourId: tour.id } }}},[_vm._v(\"Cập nhật\")]),_vm._v(\" \"),_c('a',{staticClass:\"text-danger btn-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.onClickDeleteTour(tour.id)}}},[_vm._v(\"Xoá\")])],1)])})],2)]),_vm._v(\" \"),_c('paginate',{attrs:{\"page-count\":_vm.tours.last_page == null ? 1 : _vm.tours.last_page,\"click-handler\":_vm.clickPaginate,\"prev-text\":'Prev',\"next-text\":'Next',\"container-class\":'pagination justify-content-end',\"page-class\":'page-item',\"page-link-class\":'page-link',\"prev-class\":'page-item',\"prev-link-class\":'page-link',\"next-class\":'page-item',\"next-link-class\":'page-link'}})],1)]),_vm._v(\" \"),_c('submit-delete-modal',[_c('div',{staticClass:\"modal-footer\",attrs:{\"slot\":\"modal-footer\"},slot:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.closeModalDelete()}}},[_vm._v(\"\\n        Huỷ\\n      \")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.submitDelete()}}},[(_vm.loadingButton)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),_vm._v(\"\\n        Có\\n      \")])])]),_vm._v(\" \"),_c('modal-large',[_c('div',{staticClass:\"modal-header\",attrs:{\"slot\":\"modal-header\"},slot:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"modalTitle\"}},[_vm._v(\"Ngày khởi hành\")]),_vm._v(\" \"),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"modal-body\",attrs:{\"slot\":\"modal-body\"},slot:\"modal-body\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-6\"},[_c('div',{staticClass:\"border rounded-lg h-100\",staticStyle:{\"overflow-y\":\"auto\"}},[_c('ul',{staticClass:\"list-group list-group-flush\"},_vm._l((_vm.dates),function(date,index){return _c('li',{key:index,staticClass:\"list-group-item\"},[_vm._v(\"\\n                  \"+_vm._s(date.date_departure)+\" \\n                  \"),_c('a',{staticStyle:{\"float\":\"right\",\"cursor\":\"pointer\"},attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.deleteDate(date.id)}}},[_vm._v(\"×\")])])}),0)])]),_vm._v(\" \"),_c('div',{staticClass:\"col-6\"},[_c('label',[_vm._v(\"Chọn ngày\")]),_vm._v(\" \"),_c('date-picker',{attrs:{\"disabled-dates\":_vm.disabledDates,\"bootstrap-styling\":true,\"language\":_vm.vi,\"monday-first\":true,\"inline\":true},on:{\"selected\":function($event){return _vm.selectDate()}},model:{value:(_vm.dateDeparture),callback:function ($$v) {_vm.dateDeparture=$$v},expression:\"dateDeparture\"}})],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"modal-footer\",attrs:{\"slot\":\"modal-footer\"},slot:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"Đóng\")])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"#ID\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Tên tour\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Từ nơi\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Đến nơi\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Số ngày\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Số người\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Giá tour\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Loại tour\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Status\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Active\")]),_vm._v(\" \"),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Tuỳ chọn\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',{attrs:{\"colspan\":\"12\"}},[_c('div',{staticClass:\"spinner-border\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-065b64b5\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/partner/TourManagement.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-065b64b5\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TourManagement.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TourManagement.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TourManagement.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-065b64b5\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TourManagement.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/partner/TourManagement.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\">\r\n          <router-link class=\"text-secondary\" :to=\"{ name: 'Home' }\"\r\n            >Home</router-link\r\n          >\r\n        </li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Quản lý tour</li>\r\n        <li class=\"ml-auto\">\r\n          <router-link class=\"text-info\" :to=\"{ name: 'Create Tour' }\"\r\n            >Thêm</router-link\r\n          >\r\n        </li>\r\n      </ol>\r\n    </nav>\r\n    <div class=\"card\">\r\n      <div class=\"card-body\">\r\n        <h5 class=\"card-title\">Danh sách tour</h5>\r\n        <table class=\"table table-hover\">\r\n          <caption>\r\n            List of tour\r\n          </caption>\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">#ID</th>\r\n              <th scope=\"col\">Tên tour</th>\r\n              <th scope=\"col\">Từ nơi</th>\r\n              <th scope=\"col\">Đến nơi</th>\r\n              <th scope=\"col\">Số ngày</th>\r\n              <th scope=\"col\">Số người</th>\r\n              <th scope=\"col\">Giá tour</th>\r\n              <th scope=\"col\">Loại tour</th>\r\n              <th scope=\"col\">Status</th>\r\n              <th scope=\"col\">Active</th>\r\n              <th scope=\"col\" class=\"text-center\">Tuỳ chọn</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-if=\"isLoading\" class=\"text-center\">\r\n              <td colspan=\"12\">\r\n                <div class=\"spinner-border\" role=\"status\">\r\n                  <span class=\"sr-only\">Loading...</span>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            <tr v-else v-for=\"(tour, index) in tours.data\" :key=\"index\">\r\n              <th scope=\"row\">{{ tour.id }}</th>\r\n              <td>\r\n                <router-link class=\"text-truncate\" style=\"width: 200px\" :to=\"{ name: 'Tour Detail', params: { tourId: tour.id } }\">\r\n                  {{ tour.tour_name }}\r\n                </router-link>\r\n              </td>\r\n              <td>{{ tour.from_place }}</td>\r\n              <td>{{ tour.to_place }}</td>\r\n              <td>{{ tour.number_days }}</td>\r\n              <td>{{ tour.number_persons }}</td>\r\n              <td>{{ tour.tour_price | myCurrency }} đ</td>\r\n              <td>{{ tour.tour_cate.cate_name }}</td>\r\n              <td>\r\n                <span v-if=\"tour.is_active === 1\" class=\"badge badge-success\">Active</span>\r\n                <span v-else class=\"badge badge-danger\">Blocked</span>\r\n              </td>\r\n              <td>\r\n                <div class=\"custom-control custom-checkbox\">\r\n                  <input\r\n                    class=\"custom-control-input\"\r\n                    type=\"checkbox\"\r\n                    :id=\"fetchNameCheck(tour)\"\r\n                    @change=\"onChangeStatus($event, tour)\"\r\n                    :checked=\"tour.is_active === 1\"\r\n                  />\r\n                  <label\r\n                    class=\"custom-control-label\"\r\n                    :for=\"fetchNameCheck(tour)\"\r\n                  >\r\n                  </label>\r\n                </div>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <a href=\"#\" class=\"btn btn-outline-secondary\" @click=\"onClickDateDeparture(tour.id)\">\r\n                  <i class=\"far fa-calendar-alt\"></i>\r\n                </a>\r\n                <router-link class=\"text-info btn-link ml-1 mx-2\" :to=\"{ name: 'Edit Tour', params: { tourId: tour.id } }\">Cập nhật</router-link>\r\n                <a href=\"#\" class=\"text-danger btn-link\" @click=\"onClickDeleteTour(tour.id)\">Xoá</a>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <paginate\r\n          :page-count=\"tours.last_page == null ? 1 : tours.last_page\"\r\n          :click-handler=\"clickPaginate\"\r\n          :prev-text=\"'Prev'\"\r\n          :next-text=\"'Next'\"\r\n          :container-class=\"'pagination justify-content-end'\"\r\n          :page-class=\"'page-item'\"\r\n          :page-link-class=\"'page-link'\"\r\n          :prev-class=\"'page-item'\"\r\n          :prev-link-class=\"'page-link'\"\r\n          :next-class=\"'page-item'\"\r\n          :next-link-class=\"'page-link'\"\r\n        >\r\n        </paginate>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- modal-submit-delete -->\r\n    <submit-delete-modal>\r\n      <div slot=\"modal-footer\" class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModalDelete()\">\r\n          Huỷ\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-primary\" @click=\"submitDelete()\">\r\n          <span\r\n            v-if=\"loadingButton\"\r\n            class=\"spinner-border spinner-border-sm\"\r\n            role=\"status\"\r\n            aria-hidden=\"true\"\r\n          ></span>\r\n          Có\r\n        </button>\r\n      </div>\r\n    </submit-delete-modal>\r\n    <!-- end-modal-submit-delete -->\r\n\r\n    <modal-large>\r\n      <div slot=\"modal-header\" class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"modalTitle\">Ngày khởi hành</h5>\r\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n          <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n      </div>\r\n      <div slot=\"modal-body\" class=\"modal-body\">\r\n        <div class=\"row\">\r\n          <div class=\"col-6\">\r\n            <div class=\"border rounded-lg h-100\" style=\"overflow-y: auto\">\r\n              <ul class=\"list-group list-group-flush\">\r\n                <li class=\"list-group-item\" v-for=\"(date, index) in dates\" :key=\"index\">\r\n                    {{ date.date_departure }} \r\n                    <a href=\"#\" style=\"float:right; cursor: pointer\" @click=\"deleteDate(date.id)\">&times;</a>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <label>Chọn ngày</label>\r\n            <date-picker v-model=\"dateDeparture\" @selected=\"selectDate()\" :disabled-dates=\"disabledDates\" :bootstrap-styling=\"true\" :language=\"vi\" :monday-first=\"true\" :inline=\"true\"></date-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div slot=\"modal-footer\" class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Đóng</button>\r\n      </div>\r\n    </modal-large>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport store from \"@/store\";\r\nimport {en, vi} from 'vuejs-datepicker/dist/locale'\r\nimport moment from \"moment\";\r\nmoment.locale(\"vi\");\r\n\r\nexport default {\r\n  data: () => ({\r\n    tour: {\r\n      id: null\r\n    },\r\n    // dates: [],\r\n    vi: vi,\r\n    disabledDates: {\r\n      to: new Date(),\r\n    },\r\n    dateDeparture: \"\",\r\n    loadingButton: false\r\n  }),\r\n  created() {\r\n    store.dispatch(\"tour/TOURS_FETCH\")\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"tour\", [\"tours\", \"isLoading\"]),\r\n    ...mapGetters(\"datedeparture\", [\"dates\"]),\r\n  },\r\n  methods: {\r\n    ...mapActions(\"tour\", [\"TOURS_PAGINATE\", \"TOUR_DELETE\", \"TOUR_BLOCK\"]),\r\n    ...mapActions(\"datedeparture\", [\"DATES_FETCH\", \"DATE_CREATE\", \"DATE_DELETE\"]),\r\n    dateFormatter(date) {\r\n      return moment(date).format('YYYY-MM-DD');\r\n    },\r\n    selectDate(e) {\r\n      let vm = this;\r\n      vm.$nextTick(() => {\r\n        for(let i = 0; i < vm.dates.length; i++) {\r\n          if(vm.dates[i].date_departure == vm.dateFormatter(vm.dateDeparture)) {\r\n            return;\r\n          }\r\n        }\r\n        let code = \"COTS_\" + vm.id + \"_\" + vm.dateFormatter(vm.dateDeparture);\r\n        let date = {\r\n          'date_departure_code': code,\r\n          'date_departure': vm.dateFormatter(vm.dateDeparture),\r\n          'tour_id': this.id\r\n        }        \r\n        vm.DATE_CREATE(date)\r\n      })\r\n    },\r\n    async onClickDateDeparture(tourId) {\r\n      this.id = tourId;\r\n      await this.DATES_FETCH(tourId);\r\n      $('.large__modal').modal('show');\r\n    },\r\n    deleteDate(id) {\r\n      this.DATE_DELETE(id);\r\n    },\r\n    clickPaginate(pageNum) {\r\n      this.TOURS_PAGINATE(pageNum);\r\n    },\r\n    fetchNameCheck(x) {\r\n      return \"checkbox_\" + x.id;\r\n    },\r\n    onChangeStatus($event, payload) {\r\n      let isActive = 0;\r\n      if ($event.target.checked === true) {\r\n        isActive = 1;\r\n      }\r\n      let tour = {\r\n        id: payload.id,\r\n        is_active: isActive\r\n      };\r\n      this.TOUR_BLOCK(tour);\r\n    },\r\n    onClickDeleteTour(tourId, index) {\r\n      this.tour.id = tourId;\r\n      $('.submit__delete__modal').modal('show');\r\n    },\r\n    submitDelete() {\r\n      this.TOUR_DELETE(this.tour.id);\r\n      $('.submit__delete__modal').modal('hide');\r\n      this.$toast.success({\r\n          color: \"#67C23A\",\r\n          title: \"Success!\",\r\n          message: \"Xoá thành công!\"\r\n      });\r\n    },\r\n    closeModalDelete() {\r\n      $('.submit__delete__modal').modal('hide');\r\n      this.tour.id = null;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/partner/TourManagement.vue"],"sourceRoot":""}