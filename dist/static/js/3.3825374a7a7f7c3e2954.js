webpackJsonp([3],{Jz83:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("t4D5"),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("div",{staticClass:"text-center py-5"},[t._m(0)]):s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 mb-3"},[s("div",{staticClass:"profile-cover height--img--cover orverflow-hidden shadow"},[s("img",{staticClass:"w-100 h-100",attrs:{src:t.getUrlImage(t.tour.image_cover)}})]),t._v(" "),s("div",{staticClass:"profile-header"},[s("div",{staticClass:"ml-0 profile-name"},[s("h3",{staticClass:"text-uppercase"},[t._v(t._s(t.tour.tour_name))])])])]),t._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card shadow border-0"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title text-center text-uppercase"},[t._v("Thông tin tour")]),t._v(" "),s("div",{staticClass:"d-flex flex-row justify-content-between pb-0"},[s("p",{staticClass:"card-text"},[s("strong",[t._v("Loại tour:")]),t._v(" "+t._s(t.tour.tour_cate.cate_name))]),t._v(" "),s("p",{staticClass:"card-text"},[s("strong",[t._v("Nơi đi:")]),t._v(" "+t._s(t.tour.from_place))]),t._v(" "),s("p",{staticClass:"card-text"},[s("strong",[t._v("Nơi đến:")]),t._v(" "+t._s(t.tour.to_place)+" ")]),t._v(" "),s("p",{staticClass:"card-text"},[s("strong",[t._v("Số ngày:")]),t._v(" "+t._s(t.tour.number_days)+" ngày")]),t._v(" "),s("p",{staticClass:"card-text"},[s("strong",[t._v("Số người tối đa:")]),t._v(" "+t._s(t.tour.number_persons)+" người")]),t._v(" "),s("p",{staticClass:"card-text"},[s("strong",[t._v("Giá tour/người:")]),t._v(" "+t._s(t._f("myCurrency")(t.tour.tour_price))+" đồng")])]),t._v(" "),s("hr"),t._v(" "),s("p",{staticClass:"card-text"},[s("strong",[t._v("Mô tả:")]),t._v(" "+t._s(t.tour.description))]),t._v(" "),s("p",{staticClass:"card-text"},[s("strong",[t._v("Ghi chú:")]),t._v(" "+t._s(t.tour.note))])])])]),t._v(" "),s("div",{staticClass:"col-md-7"},[s("div",{staticClass:"card shadow border-0"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title text-center text-uppercase"},[t._v("Ngày khởi hành")]),t._v(" "),s("div",{staticClass:"trending-services",staticStyle:{height:"325px","overflow-y":"auto"}},[s("table",{staticClass:"table table-sm"},[t._m(1),t._v(" "),s("tbody",t._l(t.dates,function(e,r){return s("tr",{key:r},[s("th",{attrs:{scope:"row"}},[t._v(t._s(++r))]),t._v(" "),s("th",[t._v(t._s(e.date_departure_code))]),t._v(" "),s("td",[s("p",{staticClass:"font-weight-bold font-italic"},[t._v(t._s(e.date_departure))])]),t._v(" "),s("td",[t._v(t._s(t._f("myCurrency")(t.tour.tour_price))+" đồng")]),t._v(" "),s("td",[t.isAuthenticated?s("button",{staticClass:"btn btn-outline-info js-btn-choose-date",on:{click:function(s){return t.onClickBookTour(t.tour,e,r)}}},[t._v("Đặt")]):s("button",{staticClass:"btn btn-link",on:{click:t.onClickLogin}},[t._v("Đăng nhập")])])])}),0)])])])])]),t._v(" "),s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card shadow border-0"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title text-center text-uppercase"},[t._v("Đặt tour")]),t._v(" "),s("div",{staticClass:"mb-3"},[s("h6",{staticClass:"lead"},[t._v("Ngày đã chọn: \n              "),t.isShowDateSelected?s("span",{staticClass:"badge badge-sm badge-light"},[s("a",{staticClass:"text-dark",attrs:{href:"#"},on:{click:function(e){return t.onClickRemoveDate()}}},[s("strong",[t._v(t._s(t.tourDateSelected)+" ×")])])]):t._e()])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Số lượng người")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tourOrder.numberPersons,expression:"tourOrder.numberPersons"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Nhập số lượng người"},domProps:{value:t.tourOrder.numberPersons},on:{input:function(e){e.target.composing||t.$set(t.tourOrder,"numberPersons",e.target.value)}}})]),t._v(" "),t._m(2),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Ghi chú")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tourOrder.note,expression:"tourOrder.note"}],staticClass:"form-control",attrs:{type:"text",rows:"2",placeholder:"Nhập ghi chú (nếu có)"},domProps:{value:t.tourOrder.note},on:{input:function(e){e.target.composing||t.$set(t.tourOrder,"note",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"d-flex flex-row justify-content-between"},[t.showTotalAmount?s("div",[s("p",{staticClass:"font-weight-bold"},[t._v("Tổng tiền: "+t._s(t.computeTotalPrice(t.price,t.tourOrder.numberPersons)))])]):s("div"),t._v(" "),t.isAuthenticated?s("button",{staticClass:"btn btn-dark py-2",attrs:{disabled:t.isDisabledButtonSubmit},on:{click:t.onClickSubmit}},[t._v("Xác nhận")]):s("div",[t._v("Bạn cần "),s("button",{staticClass:"btn btn-link px-0",on:{click:t.onClickLogin}},[t._v("Đăng nhập")]),t._v(" để đặt tour")])])])])])]),t._v(" "),s("modal-normal",[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"modalTitle"}},[t._v("Xác nhận đặt tour")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.onClickCloseSubmit}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[t.notification?s("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[s("h6",{staticClass:"alert-heading"},[t._v("Thành công!")]),t._v(" "),s("p",[t._v("Cảm ơn bạn đã sử dụng dịch vụ của chúng tôi, yêu cầu của bạn đã được gửi đến công ty du lịch. Chúng tôi sẽ liên hệ đến bạn để xác nhận. Trân trọng cảm ơn!")]),t._v(" "),s("hr"),t._v(" "),s("p",{staticClass:"mb-0"},[t._v("Nếu có thắc mắc vui lòng gọi hotline: "),s("a",{staticClass:"alert-link",attrs:{href:"tel:+84397532345"}},[t._v("0397532345")])])]):s("div",{staticClass:"d-flex flex-column"},[s("p",[s("strong",[t._v("Tên tour: ")]),t._v(t._s(t.tour.tour_name))]),t._v(" "),s("div",{staticClass:"d-flex flex-row"},[s("p",{staticClass:"mr-3"},[s("strong",[t._v("Nơi đi: ")]),t._v(t._s(t.tour.from_place))]),t._v(" "),s("p",{staticClass:"ml-3"},[s("strong",[t._v("Nơi đến: ")]),t._v(t._s(t.tour.to_place))])]),t._v(" "),s("p",[s("strong",[t._v("Ngày khởi hành: ")]),t._v(t._s(t.tourOrder.dateDeparture))]),t._v(" "),s("p",[s("strong",[t._v("Ghi chú: ")]),t._v(t._s(t.tourOrder.note))]),t._v(" "),s("div",{staticClass:"d-flex flex-row"},[s("p",{staticClass:"mr-3"},[s("strong",[t._v("Giá tour: ")]),t._v(t._s(t._f("myCurrency")(t.tour.tour_price))+" đồng")]),t._v(" "),s("p",{staticClass:"mx-3"},[s("strong",[t._v("Số người: ")]),t._v(t._s(t.tourOrder.numberPersons))]),t._v(" "),s("p",{staticClass:"ml-3"},[s("strong",[t._v("Tổng cộng: ")]),t._v(t._s(t._f("myCurrency")(t.tourOrder.total))+" đồng")])]),t._v(" "),s("p",[s("strong",[t._v("Phương thức thanh toán: ")]),t._v("thanh toán trực tiếp")])])]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.onClickCloseSubmit}},[t._v("Đóng")]),t._v(" "),t.notification?t._e():s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.submitOrder()}}},[t._v("Xác nhận")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("STT")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Mã tour")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Ngày khởi hành")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Giá")]),t._v(" "),s("th",{attrs:{scope:"col"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",[this._v("Phương thức thanh toán")]),this._v(" "),e("select",{staticClass:"form-control"},[e("option",{attrs:{selected:"",disabled:""}},[this._v("Chọn")]),this._v(" "),e("option",[this._v("Thanh toán trực tiếp")])])])}]};var o=function(t){s("TTyN")},n=s("VU/8")(r.a,a,!1,o,null,null);e.default=n.exports},TTyN:function(t,e){},t4D5:function(t,e,s){"use strict";(function(t){var r=s("Dd8w"),a=s.n(r),o=s("Xxa5"),n=s.n(o),i=s("exGp"),c=s.n(i),l=s("NYxO"),d=s("IcnI"),u=s("D52M"),_=(s.n(u),s("PJh5"));s.n(_).a.locale("vi"),e.a={data:function(){return{tour:{type:Object},tourOrder:{numberPersons:"",note:"",total:"",dateDepartureId:""},tourDateSelected:"",dateDeparture:"",price:"",isShowDateSelected:!1,isDisabledButtonSubmit:!0,showTotalAmount:!1,notification:!1,isLoading:!1}},created:function(){var t=this;return c()(n.a.mark(function e(){var s,r,a,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(s=t).isLoading=!0,r=s.$route.params.tourId,e.next=5,s.TOUR_FETCH_ONE(r);case 5:a=e.sent,o=a.data,s.tour=o,s.isLoading=!1,d.a.dispatch("datedeparture/DATES_FETCH",r);case 10:case"end":return e.stop()}},e,t)}))()},computed:a()({},Object(l.c)("authentication",["isAuthenticated"]),Object(l.c)("datedeparture",["dates"])),methods:a()({},Object(l.b)("tour",["TOUR_FETCH_ONE"]),Object(l.b)("tourorder",["TOUR_ORDER_CREATE"]),{getUrlImage:function(t){return"https://storage.googleapis.com/cdio-cots.appspot.com/uploads/tours/"+t},computeTotalPrice:function(t,e){""==e&&(e=0);var s=t*e;return this.tourOrder.total=s,t+" đồng x "+e+" = "+s+" đồng"},onClickBookTour:function(e,s,r){var a=this;a.showTotalAmount=!0,a.isShowDateSelected=!0,a.isDisabledButtonSubmit=!1,a.price=e.tour_price,a.tourOrder.numberPersons=1,a.tourOrder.dateDepartureId=s.id,a.tourOrder.dateDeparture=s.date_departure,a.tourDateSelected=s.date_departure,t(".js-btn-choose-date").addClass("d-none")},onClickRemoveDate:function(){var e=this;e.showTotalAmount=!1,e.isShowDateSelected=!1,e.isDisabledButtonSubmit=!0,e.price="",e.tourOrder={},e.tourDateSelected="",t(".js-btn-choose-date").removeClass("d-none")},onClickCloseSubmit:function(){var e=this;e.showTotalAmount=!1,e.price="",e.tourOrder.numberPersons="",e.tourOrder.dateDepartureId="",e.tourOrder.dateDeparture="",t(".normal__modal").modal("hide")},onClickSubmit:function(){var e=this.tour.number_persons;this.tourOrder.numberPersons>e?this.$toast.error({color:"#BD362F",title:"Error!",message:"Không còn đủ số lượng người: "+e+" người còn lại"}):t(".normal__modal").modal("show")},submitOrder:function(){var t=this;return c()(n.a.mark(function e(){var s,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={quantily_people:(s=t).tourOrder.numberPersons,total:s.tourOrder.total,note:s.tourOrder.note,date_departure_tour_id:s.tourOrder.dateDepartureId},e.next=4,s.TOUR_ORDER_CREATE(r);case 4:e.sent,s.notification=!0;case 6:case"end":return e.stop()}},e,t)}))()},onClickLogin:function(){t("#modal__login").modal("show")}})}}).call(e,s("7t+N"))}});
//# sourceMappingURL=3.3825374a7a7f7c3e2954.js.map