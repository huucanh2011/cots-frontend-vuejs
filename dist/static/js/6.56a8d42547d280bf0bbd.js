webpackJsonp([6],{SMxt:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("ytrR"),r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"text-secondary",attrs:{to:{name:"Home"}}},[t._v("Home")])],1),t._v(" "),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Quản lý tour")]),t._v(" "),e("li",{staticClass:"ml-auto"},[e("router-link",{staticClass:"text-info",attrs:{to:{name:"Create Tour"}}},[t._v("Thêm")])],1)])]),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("Danh sách tour")]),t._v(" "),e("table",{staticClass:"table table-hover"},[e("caption",[t._v("\n          List of tour\n        ")]),t._v(" "),t._m(0),t._v(" "),e("tbody",[t.isLoading?e("tr",{staticClass:"text-center"},[t._m(1)]):t._l(t.tours.data,function(a,s){return e("tr",{key:s},[e("th",{attrs:{scope:"row"}},[t._v(t._s(a.id))]),t._v(" "),e("td",[e("router-link",{staticClass:"text-truncate",staticStyle:{width:"200px"},attrs:{to:{name:"Tour Detail",params:{tourId:a.id}}}},[t._v("\n                "+t._s(a.tour_name)+"\n              ")])],1),t._v(" "),e("td",[t._v(t._s(a.from_place))]),t._v(" "),e("td",[t._v(t._s(a.to_place))]),t._v(" "),e("td",[t._v(t._s(a.number_days))]),t._v(" "),e("td",[t._v(t._s(a.number_persons))]),t._v(" "),e("td",[t._v(t._s(t._f("myCurrency")(a.tour_price))+" đ")]),t._v(" "),e("td",[t._v(t._s(a.tour_cate.cate_name))]),t._v(" "),e("td",[1===a.is_active?e("span",{staticClass:"badge badge-success"},[t._v("Active")]):e("span",{staticClass:"badge badge-danger"},[t._v("Blocked")])]),t._v(" "),e("td",[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:t.fetchNameCheck(a)},domProps:{checked:1===a.is_active},on:{change:function(e){return t.onChangeStatus(e,a)}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:t.fetchNameCheck(a)}})])]),t._v(" "),e("td",{staticClass:"text-center"},[e("a",{staticClass:"btn btn-outline-secondary",attrs:{href:"#"},on:{click:function(e){return t.onClickDateDeparture(a.id)}}},[e("i",{staticClass:"far fa-calendar-alt"})]),t._v(" "),e("router-link",{staticClass:"text-info btn-link ml-1 mx-2",attrs:{to:{name:"Edit Tour",params:{tourId:a.id}}}},[t._v("Cập nhật")]),t._v(" "),e("a",{staticClass:"text-danger btn-link",attrs:{href:"#"},on:{click:function(e){return t.onClickDeleteTour(a.id)}}},[t._v("Xoá")])],1)])})],2)]),t._v(" "),e("paginate",{attrs:{"page-count":null==t.tours.last_page?1:t.tours.last_page,"click-handler":t.clickPaginate,"prev-text":"Prev","next-text":"Next","container-class":"pagination justify-content-end","page-class":"page-item","page-link-class":"page-link","prev-class":"page-item","prev-link-class":"page-link","next-class":"page-item","next-link-class":"page-link"}})],1)]),t._v(" "),e("submit-delete-modal",[e("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.closeModalDelete()}}},[t._v("\n        Huỷ\n      ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.submitDelete()}}},[t.loadingButton?e("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n        Có\n      ")])])]),t._v(" "),e("modal-large",[e("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"modalTitle"}},[t._v("Ngày khởi hành")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"border rounded-lg h-100",staticStyle:{"overflow-y":"auto"}},[e("ul",{staticClass:"list-group list-group-flush"},t._l(t.dates,function(a,s){return e("li",{key:s,staticClass:"list-group-item"},[t._v("\n                  "+t._s(a.date_departure)+" \n                  "),e("a",{staticStyle:{float:"right",cursor:"pointer"},attrs:{href:"#"},on:{click:function(e){return t.deleteDate(a.id)}}},[t._v("×")])])}),0)])]),t._v(" "),e("div",{staticClass:"col-6"},[e("label",[t._v("Chọn ngày")]),t._v(" "),e("date-picker",{attrs:{"disabled-dates":t.disabledDates,"bootstrap-styling":!0,language:t.vi,"monday-first":!0,inline:!0},on:{selected:function(a){return t.selectDate()}},model:{value:t.dateDeparture,callback:function(a){t.dateDeparture=a},expression:"dateDeparture"}})],1)])]),t._v(" "),e("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Đóng")])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#ID")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Tên tour")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Từ nơi")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Đến nơi")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Số ngày")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Số người")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Giá tour")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Loại tour")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Status")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Active")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Tuỳ chọn")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("td",{attrs:{colspan:"12"}},[a("div",{staticClass:"spinner-border",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[this._v("Loading...")])])])}]};var o=function(t){e("ucO0")},n=e("VU/8")(s.a,r,!1,o,null,null);a.default=n.exports},ucO0:function(t,a){},ytrR:function(t,a,e){"use strict";(function(t){var s=e("Xxa5"),r=e.n(s),o=e("exGp"),n=e.n(o),i=e("Dd8w"),c=e.n(i),l=e("NYxO"),d=e("IcnI"),u=e("D52M"),_=(e.n(u),e("PJh5")),v=e.n(_);v.a.locale("vi"),a.a={data:function(){return{tour:{id:null},vi:u.vi,disabledDates:{to:new Date},dateDeparture:"",loadingButton:!1}},created:function(){d.a.dispatch("tour/TOURS_FETCH")},computed:c()({},Object(l.c)("tour",["tours","isLoading"]),Object(l.c)("datedeparture",["dates"])),methods:c()({},Object(l.b)("tour",["TOURS_PAGINATE","TOUR_DELETE","TOUR_BLOCK"]),Object(l.b)("datedeparture",["DATES_FETCH","DATE_CREATE","DATE_DELETE"]),{dateFormatter:function(t){return v()(t).format("YYYY-MM-DD")},selectDate:function(t){var a=this,e=this;e.$nextTick(function(){for(var t=0;t<e.dates.length;t++)if(e.dates[t].date_departure==e.dateFormatter(e.dateDeparture))return;var s={date_departure_code:"COTS_"+e.id+"_"+e.dateFormatter(e.dateDeparture),date_departure:e.dateFormatter(e.dateDeparture),tour_id:a.id};e.DATE_CREATE(s)})},onClickDateDeparture:function(a){var e=this;return n()(r.a.mark(function s(){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.id=a,s.next=3,e.DATES_FETCH(a);case 3:t(".large__modal").modal("show");case 4:case"end":return s.stop()}},s,e)}))()},deleteDate:function(t){this.DATE_DELETE(t)},clickPaginate:function(t){this.TOURS_PAGINATE(t)},fetchNameCheck:function(t){return"checkbox_"+t.id},onChangeStatus:function(t,a){var e=0;!0===t.target.checked&&(e=1);var s={id:a.id,is_active:e};this.TOUR_BLOCK(s)},onClickDeleteTour:function(a,e){this.tour.id=a,t(".submit__delete__modal").modal("show")},submitDelete:function(){this.TOUR_DELETE(this.tour.id),t(".submit__delete__modal").modal("hide"),this.$toast.success({color:"#67C23A",title:"Success!",message:"Xoá thành công!"})},closeModalDelete:function(){t(".submit__delete__modal").modal("hide"),this.tour.id=null}})}}).call(a,e("7t+N"))}});
//# sourceMappingURL=6.56a8d42547d280bf0bbd.js.map