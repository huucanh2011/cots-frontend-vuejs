webpackJsonp([21],{"BNF/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),c=a("exGp"),i=a.n(c),r=a("Dd8w"),o=a.n(r),l=a("NYxO"),d=a("IcnI"),u={data:function(){return{searchText:""}},created:function(){d.a.dispatch("decentralization/DECENTRALIZATIONS_FETCH"),d.a.dispatch("role/ROLES_FETCH")},computed:o()({},Object(l.c)("decentralization",["decentralizations","errors","isLoading"]),Object(l.c)("role",["roles"])),methods:o()({},Object(l.b)("decentralization",["DECENTRALIZATIONS_PAGINATE","DECENTRALIZATIONS_SEARCH","DECENTRALIZATION_UPDATE","DECENTRALIZATION_CHANGE_STATUS"]),{fetchNameCheck:function(t){return"checkbox_"+t.id},fetchNameRadio:function(t){return"radio_"+t.id},fetchIdRadio:function(t,e){return"radio_"+t.id+"_"+e.id},searchUp:function(){this.DECENTRALIZATIONS_SEARCH(this.searchText)},clickPaginate:function(t){this.DECENTRALIZATIONS_PAGINATE(t)},onChangeStatus:function(t,e){var a=this;return i()(n.a.mark(function s(){var c,i;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return c=0,!0===t.target.checked&&(c=1),i={id:e.id,is_active:c},s.next=5,a.DECENTRALIZATION_CHANGE_STATUS(i);case 5:case"end":return s.stop()}},s,a)}))()},onChangeRole:function(t,e){var a=this;return i()(n.a.mark(function s(){var c;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return c={id:t.id,updatedFields:{role_update:e.id}},s.prev=1,s.next=4,a.DECENTRALIZATION_UPDATE(c);case 4:a.$toast.success({color:"#51A351",title:"Success!",message:"Phân quyền thành công"}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(1),a.$toast.error({color:"#BD362F",title:"Error!",message:"Phân quyền thất bại"});case 10:case"end":return s.stop()}},s,a,[[1,7]])}))()}})},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"d-flex flex-row justify-content-between mb-2"},[t._m(0),t._v(" "),a("div",[a("form",{staticClass:"input-group",on:{submit:function(e){return e.preventDefault(),t.searchUp()}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"Tìm kiếm..."},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._v(" "),t._m(1)])])]),t._v(" "),a("table",{staticClass:"table table-hover"},[a("caption",[t._v("\n          List of decentralization\n        ")]),t._v(" "),a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("STT")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Tên")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Email")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Status")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Active")]),t._v(" "),t._l(t.roles.data,function(e){return a("th",{key:e.id,attrs:{scope:"col"}},[t._v("\n              "+t._s(e.role_name)+"\n            ")])})],2)]),t._v(" "),a("tbody",[t.isLoading?a("tr",{staticClass:"text-center"},[t._m(2)]):t._l(t.decentralizations.data,function(e,s){return a("tr",{key:s},[a("th",{attrs:{scope:"row"}},[t._v(t._s(++s))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",{staticClass:"text-info font-weight-bold"},[t._v("\n              "+t._s(e.email)+"\n            ")]),t._v(" "),a("td",[1===e.is_active?a("span",{staticClass:"badge badge-success"},[t._v("\n                Active\n              ")]):a("span",{staticClass:"badge badge-danger"},[t._v("\n                Blocked\n              ")])]),t._v(" "),a("td",[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",value:"0",id:t.fetchNameCheck(e)},domProps:{checked:1===e.is_active},on:{change:function(a){return t.onChangeStatus(a,e)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:t.fetchNameCheck(e)}})])]),t._v(" "),t._l(t.roles.data,function(s,n){return a("td",{key:n},[s.id===e.role_id?a("div",{staticClass:"custom-control custom-radio"},[a("input",{staticClass:"custom-control-input",attrs:{type:"radio",name:t.fetchNameRadio(e),id:t.fetchNameRadio(e,s),checked:""},on:{change:function(a){return t.onChangeRole(e,s)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:t.fetchNameRadio(e,s)}})]):a("div",{staticClass:"custom-control custom-radio"},[a("input",{staticClass:"custom-control-input",attrs:{type:"radio",name:t.fetchNameRadio(e),id:t.fetchIdRadio(e,s)},on:{change:function(a){return t.onChangeRole(e,s)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:t.fetchIdRadio(e,s)}})])])})],2)})],2)]),t._v(" "),a("paginate",{attrs:{"page-count":null==t.decentralizations.last_page?1:t.decentralizations.last_page,"click-handler":t.clickPaginate,"prev-text":"Prev","next-text":"Next","container-class":"pagination justify-content-end","page-class":"page-item","page-link-class":"page-link","prev-class":"page-item","prev-link-class":"page-link","next-class":"page-item","next-link-class":"page-link"}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h5",{staticClass:"card-title"},[this._v("Phân quyền")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-light",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-search"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{colspan:"8"}},[e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])])}]};var _=a("VU/8")(u,h,!1,function(t){a("xUEa")},null,null);e.default=_.exports},xUEa:function(t,e){}});
//# sourceMappingURL=21.9ecf654a4f633c03251a.js.map