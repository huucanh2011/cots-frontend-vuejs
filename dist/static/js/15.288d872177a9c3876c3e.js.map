{"version":3,"sources":["webpack:///src/views/user/CompanyDetail.vue","webpack:///./src/views/user/CompanyDetail.vue?62bb","webpack:///./src/views/user/CompanyDetail.vue"],"names":["CompanyDetail","data","partner","tours","ratings","rating","content","scores","ratingMode","editMode","currentPartnerId","isLoading","created","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","vm","id","_ref","wrap","_context","prev","next","$route","params","companyId","PARTNER_FETCH_ONE","sent","store","dispatch","stop","computed","extends_default","Object","vuex_esm","methods","getUrlImageTour","name","getUrlImageCover","onClickCompany","_this2","_callee2","_ref2","_context2","$router","push","submitRating","_this3","_callee3","_ref3","_context3","rating_content","rating_scores","partner_id","RATING_CREATE","checkRating","_this4","findIndex","user_id","currentUser","editRating","clickPaginate","pageNum","TOURS_PAGINATE","user_CompanyDetail","render","_vm","_h","$createElement","_c","_self","attrs","aria-label","staticClass","to","_v","aria-current","_m","src","image_cover","_s","href","description","address","_f","avg_partner_scores","_l","tour","index","key","tourId","height","tour_name","from_place","to_place","tour_price","total","page-count","last_page","click-handler","prev-text","next-text","container-class","page-class","page-link-class","prev-class","prev-link-class","next-class","next-link-class","user","on","click","$event","_e","directives","rawName","value","expression","rows","placeholder","domProps","input","target","composing","$set","star-size","show-rating","model","callback","$$v","submitUpdateRating","staticStyle","cursor","title","staticRenderFns","role","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"sNAkJAA,GACAC,KAAA,kBACAC,WACAC,SACAC,WACAC,QACAC,QAAA,GACAC,OAAA,MAEAC,YAAA,EACAC,UAAA,EACAC,iBAAA,GACAC,WAAA,IAEAC,QAdA,WAcA,IAAAC,EAAAC,KAAA,OAAAC,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAArB,EAAA,OAAAe,EAAAC,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACAN,EAAAP,GACAF,WAAA,EACAU,EAAAD,EAAAV,iBAAAU,EAAAO,OAAAC,OAAAC,UAHAL,EAAAE,KAAA,EAIAN,EAAAU,kBAAAT,GAJA,OAAAC,EAAAE,EAAAO,KAIA9B,EAJAqB,EAIArB,KACAmB,EAAAlB,QAAAD,EAAAC,QACAkB,EAAAhB,QAAAH,EAAAG,QACAgB,EAAAjB,MAAAF,EAAAE,MACA6B,EAAA,EAAAC,SAAA,2BACAb,EAAAT,WAAA,EATA,yBAAAa,EAAAU,SAAAf,EAAAN,KAAAE,IAWAoB,SAAYC,OACZC,OAAAC,EAAA,EAAAD,CAAA,oDACAA,OAAAC,EAAA,EAAAD,CAAA,yBAEAE,QAAWH,OACXC,OAAAC,EAAA,EAAAD,CAAA,iCACAA,OAAAC,EAAA,EAAAD,CAAA,4BACAA,OAAAC,EAAA,EAAAD,CAAA,4BACAG,gBAJA,SAIAC,GACA,4EAAAA,GAEAC,iBAPA,SAOAD,GACA,4EAAAA,GAEAE,eAVA,SAUAd,GAAA,IAAAe,EAAA9B,KAAA,OAAAC,IAAAC,EAAAC,EAAAC,KAAA,SAAA2B,IAAA,IAAAzB,EAAA0B,EAAA7C,EAAA,OAAAe,EAAAC,EAAAM,KAAA,SAAAwB,GAAA,cAAAA,EAAAtB,KAAAsB,EAAArB,MAAA,cACAN,EAAAwB,GACAjC,WAAA,EACAS,EAAA4B,QAAAC,MAAAR,KAAA,iBAAAb,QAAAC,eAHAkB,EAAArB,KAAA,EAIAN,EAAAU,kBAAAD,GAJA,OAAAiB,EAAAC,EAAAhB,KAIA9B,EAJA6C,EAIA7C,KACAmB,EAAAV,iBAAAmB,EACAT,EAAAlB,QAAAD,EAAAC,QACAkB,EAAAhB,QAAAH,EAAAG,QACAgB,EAAAjB,MAAAF,EAAAE,MACA6B,EAAA,EAAAC,SAAA,2BACAb,EAAAT,WAAA,EAVA,yBAAAoC,EAAAb,SAAAW,EAAAD,KAAA7B,IAYAmC,aAtBA,WAsBA,IAAAC,EAAArC,KAAA,OAAAC,IAAAC,EAAAC,EAAAC,KAAA,SAAAkC,IAAA,IAAA/C,EAAAe,EAAAC,EAAAgC,EAAApD,EAAA,OAAAe,EAAAC,EAAAM,KAAA,SAAA+B,GAAA,cAAAA,EAAA7B,KAAA6B,EAAA5B,MAAA,cACArB,GACAkD,eAAAJ,EAAA9C,OAAAC,QACAkD,cAAAL,EAAA9C,OAAAE,OACAkD,WAAAN,EAAAzC,kBAJA4C,EAAA5B,KAAA,EAMAyB,EAAAO,cAAArD,GANA,cAOA8C,EAAA3C,YAAA,EAEAa,GADAD,EAAA+B,GACAzC,iBAAAU,EAAAO,OAAAC,OAAAC,UATAyB,EAAA5B,KAAA,EAUAN,EAAAU,kBAAAT,GAVA,OAAAgC,EAAAC,EAAAvB,KAUA9B,EAVAoD,EAUApD,KACAmB,EAAAlB,QAAAD,EAAAC,QACAkB,EAAAhB,QAAAH,EAAAG,QACAgB,EAAAjB,MAAAF,EAAAE,MACA6B,EAAA,EAAAC,SAAA,2BAdA,yBAAAqB,EAAApB,SAAAkB,EAAAD,KAAApC,IAgBA4C,YAtCA,WAsCA,IAAAC,EAAA9C,KAEA,UADAA,KAAAV,QAAAyD,UAAA,SAAAxD,GAAA,OAAAA,EAAAyD,SAAAF,EAAAG,YAAA1C,MAOA2C,WA9CA,WA+CAlD,KAAAN,YAAA,EACAM,KAAAL,UAAA,GAEAwD,cAlDA,SAkDAC,GACApD,KAAAqD,eAAAD,OC/NeE,GADEC,OAFjB,WAA0B,IAAAC,EAAAxD,KAAayD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,OAAOC,aAAA,gBAA2BH,EAAA,MAAWI,YAAA,eAAyBJ,EAAA,MAAWI,YAAA,oBAA8BJ,EAAA,eAAoBI,YAAA,iBAAAF,OAAoCG,IAAMrC,KAAA,WAAiB6B,EAAAS,GAAA,cAAAT,EAAAS,GAAA,KAAAN,EAAA,MAA4CI,YAAA,yBAAAF,OAA4CK,eAAA,UAAuBV,EAAAS,GAAA,0BAAAT,EAAAS,GAAA,KAAAT,EAAA,UAAAG,EAAA,OAAyEI,YAAA,qBAA+BP,EAAAW,GAAA,KAAAR,EAAA,OAAwBI,YAAA,QAAkBJ,EAAA,OAAYI,YAAA,cAAwBJ,EAAA,OAAYI,YAAA,4DAAsEJ,EAAA,OAAYI,YAAA,cAAAF,OAAiCO,IAAAZ,EAAA5B,iBAAA4B,EAAApE,QAAAiF,kBAAqDb,EAAAS,GAAA,KAAAN,EAAA,OAA0BI,YAAA,mBAA6BJ,EAAA,OAAYI,YAAA,sBAAgCJ,EAAA,MAAAH,EAAAS,GAAAT,EAAAc,GAAAd,EAAApE,QAAAuC,WAAA6B,EAAAS,GAAA,KAAAN,EAAA,OAAsEI,YAAA,wBAAkCJ,EAAA,MAAWI,YAAA,kBAA4BJ,EAAA,MAAAA,EAAA,KAAmBE,OAAOU,KAAA,OAAYf,EAAAS,GAAA,UAAAT,EAAAc,GAAAd,EAAApE,QAAAoF,kBAAAhB,EAAAS,GAAA,KAAAN,EAAA,MAAAA,EAAA,KAAqFE,OAAOU,KAAA,OAAYf,EAAAS,GAAA,YAAAT,EAAAc,GAAAd,EAAApE,QAAAqF,cAAAjB,EAAAS,GAAA,KAAAN,EAAA,MAAAA,EAAA,KAAmFI,YAAA,eAAAF,OAAkCU,KAAA,OAAYf,EAAAS,GAAAT,EAAAc,GAAAd,EAAAkB,GAAA,WAAAlB,GAAApE,QAAAuF,sBAAAhB,EAAA,KAA6EI,YAAA,iCAA+BP,EAAAS,GAAA,KAAAN,EAAA,OAAoCI,YAAA,aAAuBJ,EAAA,OAAYI,YAAA,iBAA4BP,EAAAoB,GAAApB,EAAAnE,MAAA,cAAAwF,EAAAC,GAA8C,OAAAnB,EAAA,OAAiBoB,IAAAD,EAAAf,YAAA,sBAA0CJ,EAAA,OAAYI,YAAA,yCAAmDJ,EAAA,eAAoBE,OAAOG,IAAMrC,KAAA,cAAAb,QAA+BkE,OAAAH,EAAAtE,QAAsBoD,EAAA,OAAYI,YAAA,eAAAF,OAAkCO,IAAAZ,EAAA9B,gBAAAmD,EAAAR,aAAAY,OAAA,aAA8DzB,EAAAS,GAAA,KAAAN,EAAA,OAA0BI,YAAA,kBAA4BJ,EAAA,MAAWI,YAAA,eAAyBJ,EAAA,eAAoBI,YAAA,YAAAF,OAA+BG,IAAMrC,KAAA,cAAAb,QAA+BkE,OAAAH,EAAAtE,QAAsBiD,EAAAS,GAAA,yBAAAT,EAAAc,GAAAO,EAAAK,WAAA,8BAAA1B,EAAAS,GAAA,KAAAN,EAAA,OAA6GI,YAAA,WAAqBJ,EAAA,OAAYI,YAAA,YAAsBJ,EAAA,KAAUI,YAAA,cAAwBP,EAAAS,GAAAT,EAAAc,GAAAO,EAAAM,YAAA,MAAA3B,EAAAc,GAAAO,EAAAO,eAAA5B,EAAAS,GAAA,KAAAN,EAAA,OAAwFI,YAAA,YAAsBJ,EAAA,MAAWI,YAAA,2BAAqCP,EAAAS,GAAA,OAAAT,EAAAc,GAAAd,EAAAkB,GAAA,aAAAlB,CAAAqB,EAAAQ,aAAA,6BAAyF,GAAA7B,EAAAS,GAAA,SAAAT,EAAAnE,MAAAiG,MAAA3B,EAAA,OAAmDI,YAAA,SAAmBJ,EAAA,YAAiBE,OAAO0B,aAAA/B,EAAAnE,MAAAmG,UAAAC,gBAAAjC,EAAAL,cAAAuC,YAAA,OAAAC,YAAA,OAAAC,kBAAA,oCAAAC,aAAA,YAAAC,kBAAA,YAAAC,aAAA,YAAAC,kBAAA,YAAAC,aAAA,YAAAC,kBAAA,gBAAqU,GAAAvC,EAAA,OAAgBI,YAAA,qBAA+BJ,EAAA,QAAaI,YAAA,qBAA+BP,EAAAS,GAAA,2BAAAT,EAAAS,GAAA,KAAAN,EAAA,OAA0DI,YAAA,aAAuBJ,EAAA,OAAYI,YAAA,oCAA8CJ,EAAA,OAAYI,YAAA,cAAwBJ,EAAA,MAAWI,YAAA,0CAAoDP,EAAAS,GAAA,cAAAT,EAAAS,GAAA,KAAAT,EAAAoB,GAAApB,EAAA,iBAAAjE,EAAAuF,GAA+E,OAAAnB,EAAA,OAAiBoB,IAAAD,EAAAf,YAAA,iDAAqEJ,EAAA,OAAAA,EAAA,OAAsBI,YAAA,qBAA+BP,EAAAS,GAAAT,EAAAc,GAAA/E,EAAA4G,KAAAxE,SAAA6B,EAAAS,GAAA,KAAAN,EAAA,OAA2DI,YAAA,kBAA4BP,EAAAS,GAAAT,EAAAc,GAAA/E,EAAAkD,qBAAAe,EAAAS,GAAA,KAAAN,EAAA,OAAkEI,YAAA,0CAAoDP,EAAAS,GAAAT,EAAAc,GAAAd,EAAAkB,GAAA,WAAAlB,CAAAjE,EAAAmD,uBAA+Dc,EAAAS,GAAA,KAAAT,EAAA,gBAAAG,EAAA,OAA8CI,YAAA,qBAA+BP,EAAAX,cAA+Hc,EAAA,KAAoCI,YAAA,YAAAF,OAA+BU,KAAA,KAAW6B,IAAKC,MAAA,SAAAC,GAAyB,OAAA9C,EAAAN,iBAA0BM,EAAAS,GAAA,kBAArQN,EAAA,KAA+BI,YAAA,YAAAF,OAA+BU,KAAA,KAAW6B,IAAKC,MAAA,SAAAC,GAAyB9C,EAAA9D,YAAA,MAAwB8D,EAAAS,GAAA,qBAAsIT,EAAA+C,MAAA,KAAA/C,EAAAS,GAAA,KAAAT,EAAA,WAAAG,EAAA,OAAmFI,YAAA,oCAA8CJ,EAAA,OAAYI,YAAA,cAAwBP,EAAA7D,SAA+EgE,EAAA,MAAqCI,YAAA,0CAAoDP,EAAAS,GAAA,kBAAxKN,EAAA,MAA2BI,YAAA,0CAAoDP,EAAAS,GAAA,mBAAyFT,EAAAS,GAAA,KAAAN,EAAA,OAAiDI,YAAA,uBAAiCJ,EAAA,OAAYI,YAAA,SAAmBJ,EAAA,YAAiB6C,aAAa7E,KAAA,QAAA8E,QAAA,UAAAC,MAAAlD,EAAAjE,OAAA,QAAAoH,WAAA,mBAAsF5C,YAAA,eAAAF,OAAoC+C,KAAA,IAAAC,YAAA,0BAAkDC,UAAWJ,MAAAlD,EAAAjE,OAAA,SAA6B6G,IAAKW,MAAA,SAAAT,GAAyBA,EAAAU,OAAAC,WAAsCzD,EAAA0D,KAAA1D,EAAAjE,OAAA,UAAA+G,EAAAU,OAAAN,aAAuDlD,EAAAS,GAAA,KAAAN,EAAA,OAA0BI,YAAA,6CAAuDJ,EAAA,eAAoBE,OAAOsD,YAAA,GAAAC,eAAA,GAAmCC,OAAQX,MAAAlD,EAAAjE,OAAA,OAAA+H,SAAA,SAAAC,GAAmD/D,EAAA0D,KAAA1D,EAAAjE,OAAA,SAAAgI,IAAoCZ,WAAA,mBAA6BnD,EAAAS,GAAA,KAAAN,EAAA,OAAAA,EAAA,UAAqCI,YAAA,oBAAAqC,IAAoCC,MAAA,SAAAC,GAAyB9C,EAAA9D,YAAA,MAAyB8D,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAT,EAAA7D,SAAmJgE,EAAA,UAAoCI,YAAA,eAAAqC,IAA+BC,MAAA,SAAAC,GAAyB,OAAA9C,EAAAgE,yBAAkChE,EAAAS,GAAA,SAAjRN,EAAA,UAA4DI,YAAA,kBAAAqC,IAAkCC,MAAA,SAAAC,GAAyB,OAAA9C,EAAApB,mBAA4BoB,EAAAS,GAAA,iBAA8H,SAAAT,EAAA+C,KAAA/C,EAAAS,GAAA,KAAAN,EAAA,OAA6DI,YAAA,+CAAyDJ,EAAA,OAAYI,YAAA,cAAwBJ,EAAA,MAAWI,YAAA,0CAAoDP,EAAAS,GAAA,qBAAAT,EAAAS,GAAA,KAAAT,EAAAoB,GAAApB,EAAA,qBAAApE,EAAA0F,GAA2F,OAAAnB,EAAA,KAAeoB,IAAAD,EAAAf,YAAA,sBAAA0D,aAAyDC,OAAA,WAAmB7D,OAAQ8D,MAAAvI,EAAAuC,MAAqByE,IAAKC,MAAA,SAAAC,GAAyB,OAAA9C,EAAA3B,eAAAzC,EAAAmB,QAAwCnB,EAAAmB,IAAAiD,EAAA5D,iBAAA+D,EAAA,OAAiDI,YAAA,4CAAsDJ,EAAA,KAAUI,YAAA,4BAAsCP,EAAAS,GAAAT,EAAAc,GAAAlF,EAAAuC,SAAA6B,EAAAS,GAAA,KAAAN,EAAA,QAAwDI,YAAA,uCAAiDP,EAAAS,GAAA,mBAAAT,EAAAc,GAAAd,EAAAkB,GAAA,WAAAlB,CAAApE,EAAAuF,qBAAA,wBAAAnB,EAAA+C,UAAsH,YAEvwMqB,iBADjB,WAAoC,IAAanE,EAAbzD,KAAa0D,eAA0BC,EAAvC3D,KAAuC4D,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBI,YAAA,iBAAAF,OAAoCgE,KAAA,YAAiBlE,EAAA,QAAaI,YAAA,YAAlJ/D,KAAwKiE,GAAA,qBCE5M,IAcA6D,EAdyBC,EAAQ,OAcjCC,CACE9I,EACAoE,GATF,EAVA,SAAA2E,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/15.288d872177a9c3876c3e.js","sourcesContent":["<template>\r\n  <div>\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\">\r\n          <router-link class=\"text-secondary\" :to=\"{ name: 'Home' }\"\r\n            >Home</router-link\r\n          >\r\n        </li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Chi tiết công ty</li>\r\n      </ol>\r\n    </nav>\r\n    <div v-if=\"isLoading\" class=\"text-center py-5\">\r\n      <div class=\"spinner-border\" role=\"status\">\r\n        <span class=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"row\">\r\n      <div class=\"col-md-12\">\r\n        <div class=\"profile-cover shadow height--img--cover overflow-hidden\">\r\n          <img class=\"w-100 h-100\" :src=\"getUrlImageCover(partner.image_cover)\">\r\n        </div>\r\n        <div class=\"profile-header\">\r\n          <div class=\"ml-0 profile-name\">\r\n            <h3>{{ partner.name }}</h3>\r\n          </div>\r\n          <div class=\"profile-header-menu\">\r\n            <ul class=\"list-unstyled\">\r\n              <li><a href=\"#\">Mô tả: {{ partner.description }}</a></li>\r\n              <li><a href=\"#\">Địa chỉ: {{ partner.address }}</a></li>\r\n              <li><a class=\"text-warning\" href=\"#\">{{ partner.avg_partner_scores | myRating }}<i class=\"fas fa-star ml-2\"></i></a></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-8\">\r\n        <div class=\"card-deck row\">\r\n          <div v-for=\"(tour, index) in tours.data\" :key=\"index\" class=\"col-md-6 p-0 mb-4\">\r\n            <div class=\"card rounded-lg shadow border-0 mx-3\">\r\n              <router-link :to=\"{ name: 'Tour Detail', params: { tourId: tour.id } }\">\r\n                <img :src=\"getUrlImageTour(tour.image_cover)\" class=\"card-img-top\" height=\"245px\">  \r\n              </router-link>\r\n              <div class=\"card-body m-0\">\r\n                  <h5 class=\"card-title\">\r\n                    <router-link class=\"text-dark\" :to=\"{ name: 'Tour Detail', params: { tourId: tour.id } }\">\r\n                      {{ tour.tour_name }}\r\n                    </router-link>\r\n                  </h5>\r\n                  <div class=\"d-flex\">\r\n                    <div class=\"mr-auto\">\r\n                      <p class=\"card-text\">{{ tour.from_place }} - {{ tour.to_place }}</p>\r\n                    </div>\r\n                    <div class=\"ml-auto\">\r\n                      <h5 class=\"card-text text-primary\">Giá {{ tour.tour_price | myCurrency }} đ / ngày</h5>\r\n                    </div>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"tours.total !== 0\" class=\"py-3\">\r\n          <paginate\r\n            :page-count=\"tours.last_page\"\r\n            :click-handler=\"clickPaginate\"\r\n            :prev-text=\"'Prev'\"\r\n            :next-text=\"'Next'\"\r\n            :container-class=\"'pagination justify-content-center'\"\r\n            :page-class=\"'page-item'\"\r\n            :page-link-class=\"'page-link'\"\r\n            :prev-class=\"'page-item'\"\r\n            :prev-link-class=\"'page-link'\"\r\n            :next-class=\"'page-item'\"\r\n            :next-link-class=\"'page-link'\"\r\n          >\r\n          </paginate>\r\n        </div>\r\n        <div v-else class=\"py-3 text-center\">\r\n          <span class=\"font-weight-bold\">Không có tour nào</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <div class=\"card shadow rounded-lg border-0\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title text-center text-uppercase\">Đánh giá</h5>\r\n            <div v-for=\"(rating, index) in ratings\" :key=\"index\" class=\"d-flex flex-row justify-content-between mb-3\">\r\n              <div>\r\n                <div class=\"font-weight-bold\">{{ rating.user.name }}</div>\r\n                <div class=\"text-truncate\">{{ rating.rating_content }}</div>\r\n              </div>\r\n              <div class=\"font-weight-bold text-warning my-auto\">{{ rating.rating_scores | myRating }}</div>\r\n            </div>\r\n            <div v-if=\"isAuthenticated\" class=\"mt-2 text-center\">\r\n              <a v-if=\"!checkRating()\" href=\"#\" class=\"card-link\" @click=\"ratingMode = true\">Viết đánh giá</a>\r\n              <a v-else href=\"#\" class=\"card-link\" @click=\"editRating()\">Sửa đánh giá</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"ratingMode\" class=\"card shadow rounded-lg border-0\">\r\n          <div class=\"card-body\">\r\n            <h5 v-if=\"!editMode\" class=\"card-title text-center text-uppercase\">Viết đánh giá</h5>\r\n            <h5 v-else class=\"card-title text-center text-uppercase\">Sửa đánh giá</h5>\r\n            <div class=\"d-flex flex-column\">\r\n              <div class=\"mb-3\">\r\n                <textarea v-model=\"rating.content\" class=\"form-control\" rows=\"3\" placeholder=\"Nhập nội dung đánh giá\"></textarea>\r\n              </div>\r\n              <div class=\"d-flex flex-grow justify-content-between\">\r\n                <star-rating v-model=\"rating.scores\" :star-size=\"20\" :show-rating=\"false\"></star-rating>\r\n                <div>\r\n                  <button class=\"btn btn-secondary\" @click=\"ratingMode = false\">Đóng</button>\r\n                  <button v-if=\"!editMode\" class=\"btn btn-success\" @click=\"submitRating()\">Đánh giá</button>\r\n                  <button v-else class=\"btn btn-info\" @click=\"submitUpdateRating()\">Sửa</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"card shadow rounded-lg border-0 sticky-top\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title text-center text-uppercase\">Công ty nổi bật</h5>\r\n            <a\r\n              v-for=\"(partner, index) in topPartners\"\r\n              :key=\"index\"\r\n              @click=\"onClickCompany(partner.id)\"\r\n              class=\"card-link text-dark\"\r\n              :title=\"partner.name\"\r\n              style=\"cursor: pointer\"\r\n            >\r\n            <div v-if=\"partner.id != currentPartnerId\" class=\"d-flex flex-row justify-content-between\">\r\n              <p class=\"text-truncate my-1 mr-3\">{{ partner.name }}</p>\r\n              <span class=\"font-weight-bold text-warning my-1\">\r\n                {{ partner.avg_partner_scores | myRating }}\r\n                <!-- <i class=\"fas fa-star my-1\"></i> -->\r\n              </span>\r\n            </div>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  data: () => ({\r\n    partner: {},\r\n    tours: {},\r\n    ratings: {},\r\n    rating: {\r\n      content: \"\",\r\n      scores: null\r\n    },\r\n    ratingMode: false,\r\n    editMode: false,\r\n    currentPartnerId: \"\",\r\n    isLoading: false,\r\n  }),\r\n  async created() {\r\n    let vm = this;\r\n    vm.isLoading = true;\r\n    let id = vm.currentPartnerId = vm.$route.params.companyId;\r\n    const { data } = await vm.PARTNER_FETCH_ONE(id);\r\n    vm.partner = data.partner;\r\n    vm.ratings = data.ratings;\r\n    vm.tours = data.tours;\r\n    store.dispatch(\"home/TOP_PARTNERS_FETCH\");\r\n    vm.isLoading = false;\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"authentication\", [\"currentUser\",\"isAuthenticated\"]),\r\n    ...mapGetters(\"home\", [\"topPartners\"]),\r\n  },\r\n  methods: {\r\n    ...mapActions(\"partner\", [\"PARTNER_FETCH_ONE\"]),\r\n    ...mapActions(\"rating\", [\"RATING_CREATE\"]),\r\n    ...mapActions(\"tour\", [\"TOURS_PAGINATE\"]),\r\n    getUrlImageTour(name) {\r\n      return \"https://storage.googleapis.com/cdio-cots.appspot.com/uploads/tours/\" + name;\r\n    },\r\n    getUrlImageCover(name) {\r\n      return \"https://storage.googleapis.com/cdio-cots.appspot.com/uploads/users/\" + name;\r\n    },\r\n    async onClickCompany(companyId) {\r\n      let vm = this;\r\n      vm.isLoading = true;\r\n      vm.$router.push({ name: 'Company Detail', params: { companyId: companyId } });\r\n      const { data } = await vm.PARTNER_FETCH_ONE(companyId);\r\n      vm.currentPartnerId = companyId;\r\n      vm.partner = data.partner;\r\n      vm.ratings = data.ratings;\r\n      vm.tours = data.tours;\r\n      store.dispatch(\"home/TOP_PARTNERS_FETCH\");\r\n      vm.isLoading = false;\r\n    },\r\n    async submitRating() {\r\n      let rating = {\r\n        'rating_content': this.rating.content,\r\n        'rating_scores': this.rating.scores,\r\n        'partner_id': this.currentPartnerId\r\n      }\r\n      await this.RATING_CREATE(rating);\r\n      this.ratingMode = false;\r\n      let vm = this;\r\n      let id = vm.currentPartnerId = vm.$route.params.companyId;\r\n      const { data } = await vm.PARTNER_FETCH_ONE(id);\r\n      vm.partner = data.partner;\r\n      vm.ratings = data.ratings;\r\n      vm.tours = data.tours;\r\n      store.dispatch(\"home/TOP_PARTNERS_FETCH\");\r\n    },\r\n    checkRating() {\r\n      const index = this.ratings.findIndex(rating => rating.user_id == this.currentUser.id);\r\n      if(index != -1) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    editRating() {\r\n      this.ratingMode = true;\r\n      this.editMode = true;\r\n    },\r\n    clickPaginate(pageNum) {\r\n      this.TOURS_PAGINATE(pageNum);\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/user/CompanyDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('nav',{attrs:{\"aria-label\":\"breadcrumb\"}},[_c('ol',{staticClass:\"breadcrumb\"},[_c('li',{staticClass:\"breadcrumb-item\"},[_c('router-link',{staticClass:\"text-secondary\",attrs:{\"to\":{ name: 'Home' }}},[_vm._v(\"Home\")])],1),_vm._v(\" \"),_c('li',{staticClass:\"breadcrumb-item active\",attrs:{\"aria-current\":\"page\"}},[_vm._v(\"Chi tiết công ty\")])])]),_vm._v(\" \"),(_vm.isLoading)?_c('div',{staticClass:\"text-center py-5\"},[_vm._m(0)]):_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"profile-cover shadow height--img--cover overflow-hidden\"},[_c('img',{staticClass:\"w-100 h-100\",attrs:{\"src\":_vm.getUrlImageCover(_vm.partner.image_cover)}})]),_vm._v(\" \"),_c('div',{staticClass:\"profile-header\"},[_c('div',{staticClass:\"ml-0 profile-name\"},[_c('h3',[_vm._v(_vm._s(_vm.partner.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"profile-header-menu\"},[_c('ul',{staticClass:\"list-unstyled\"},[_c('li',[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"Mô tả: \"+_vm._s(_vm.partner.description))])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"Địa chỉ: \"+_vm._s(_vm.partner.address))])]),_vm._v(\" \"),_c('li',[_c('a',{staticClass:\"text-warning\",attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(_vm._f(\"myRating\")(_vm.partner.avg_partner_scores))),_c('i',{staticClass:\"fas fa-star ml-2\"})])])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-md-8\"},[_c('div',{staticClass:\"card-deck row\"},_vm._l((_vm.tours.data),function(tour,index){return _c('div',{key:index,staticClass:\"col-md-6 p-0 mb-4\"},[_c('div',{staticClass:\"card rounded-lg shadow border-0 mx-3\"},[_c('router-link',{attrs:{\"to\":{ name: 'Tour Detail', params: { tourId: tour.id } }}},[_c('img',{staticClass:\"card-img-top\",attrs:{\"src\":_vm.getUrlImageTour(tour.image_cover),\"height\":\"245px\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"card-body m-0\"},[_c('h5',{staticClass:\"card-title\"},[_c('router-link',{staticClass:\"text-dark\",attrs:{\"to\":{ name: 'Tour Detail', params: { tourId: tour.id } }}},[_vm._v(\"\\n                    \"+_vm._s(tour.tour_name)+\"\\n                  \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"mr-auto\"},[_c('p',{staticClass:\"card-text\"},[_vm._v(_vm._s(tour.from_place)+\" - \"+_vm._s(tour.to_place))])]),_vm._v(\" \"),_c('div',{staticClass:\"ml-auto\"},[_c('h5',{staticClass:\"card-text text-primary\"},[_vm._v(\"Giá \"+_vm._s(_vm._f(\"myCurrency\")(tour.tour_price))+\" đ / ngày\")])])])])],1)])}),0),_vm._v(\" \"),(_vm.tours.total !== 0)?_c('div',{staticClass:\"py-3\"},[_c('paginate',{attrs:{\"page-count\":_vm.tours.last_page,\"click-handler\":_vm.clickPaginate,\"prev-text\":'Prev',\"next-text\":'Next',\"container-class\":'pagination justify-content-center',\"page-class\":'page-item',\"page-link-class\":'page-link',\"prev-class\":'page-item',\"prev-link-class\":'page-link',\"next-class\":'page-item',\"next-link-class\":'page-link'}})],1):_c('div',{staticClass:\"py-3 text-center\"},[_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(\"Không có tour nào\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"card shadow rounded-lg border-0\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title text-center text-uppercase\"},[_vm._v(\"Đánh giá\")]),_vm._v(\" \"),_vm._l((_vm.ratings),function(rating,index){return _c('div',{key:index,staticClass:\"d-flex flex-row justify-content-between mb-3\"},[_c('div',[_c('div',{staticClass:\"font-weight-bold\"},[_vm._v(_vm._s(rating.user.name))]),_vm._v(\" \"),_c('div',{staticClass:\"text-truncate\"},[_vm._v(_vm._s(rating.rating_content))])]),_vm._v(\" \"),_c('div',{staticClass:\"font-weight-bold text-warning my-auto\"},[_vm._v(_vm._s(_vm._f(\"myRating\")(rating.rating_scores)))])])}),_vm._v(\" \"),(_vm.isAuthenticated)?_c('div',{staticClass:\"mt-2 text-center\"},[(!_vm.checkRating())?_c('a',{staticClass:\"card-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){_vm.ratingMode = true}}},[_vm._v(\"Viết đánh giá\")]):_c('a',{staticClass:\"card-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.editRating()}}},[_vm._v(\"Sửa đánh giá\")])]):_vm._e()],2)]),_vm._v(\" \"),(_vm.ratingMode)?_c('div',{staticClass:\"card shadow rounded-lg border-0\"},[_c('div',{staticClass:\"card-body\"},[(!_vm.editMode)?_c('h5',{staticClass:\"card-title text-center text-uppercase\"},[_vm._v(\"Viết đánh giá\")]):_c('h5',{staticClass:\"card-title text-center text-uppercase\"},[_vm._v(\"Sửa đánh giá\")]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex flex-column\"},[_c('div',{staticClass:\"mb-3\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rating.content),expression:\"rating.content\"}],staticClass:\"form-control\",attrs:{\"rows\":\"3\",\"placeholder\":\"Nhập nội dung đánh giá\"},domProps:{\"value\":(_vm.rating.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.rating, \"content\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex flex-grow justify-content-between\"},[_c('star-rating',{attrs:{\"star-size\":20,\"show-rating\":false},model:{value:(_vm.rating.scores),callback:function ($$v) {_vm.$set(_vm.rating, \"scores\", $$v)},expression:\"rating.scores\"}}),_vm._v(\" \"),_c('div',[_c('button',{staticClass:\"btn btn-secondary\",on:{\"click\":function($event){_vm.ratingMode = false}}},[_vm._v(\"Đóng\")]),_vm._v(\" \"),(!_vm.editMode)?_c('button',{staticClass:\"btn btn-success\",on:{\"click\":function($event){return _vm.submitRating()}}},[_vm._v(\"Đánh giá\")]):_c('button',{staticClass:\"btn btn-info\",on:{\"click\":function($event){return _vm.submitUpdateRating()}}},[_vm._v(\"Sửa\")])])],1)])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"card shadow rounded-lg border-0 sticky-top\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title text-center text-uppercase\"},[_vm._v(\"Công ty nổi bật\")]),_vm._v(\" \"),_vm._l((_vm.topPartners),function(partner,index){return _c('a',{key:index,staticClass:\"card-link text-dark\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"title\":partner.name},on:{\"click\":function($event){return _vm.onClickCompany(partner.id)}}},[(partner.id != _vm.currentPartnerId)?_c('div',{staticClass:\"d-flex flex-row justify-content-between\"},[_c('p',{staticClass:\"text-truncate my-1 mr-3\"},[_vm._v(_vm._s(partner.name))]),_vm._v(\" \"),_c('span',{staticClass:\"font-weight-bold text-warning my-1\"},[_vm._v(\"\\n              \"+_vm._s(_vm._f(\"myRating\")(partner.avg_partner_scores))+\"\\n              \")])]):_vm._e()])})],2)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spinner-border\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e2a7b86a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/CompanyDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e2a7b86a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CompanyDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CompanyDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CompanyDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e2a7b86a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CompanyDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/CompanyDetail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}