webpackJsonp([8],{"472H":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("uXU2"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"d-flex flex-row justify-content-between mb-2"},[t._m(0),t._v(" "),a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"py-1 mr-2"},[a("button",{staticClass:"btn btn-success",on:{click:t.newModal}},[a("i",{staticClass:"fas fa-plus"}),t._v("\n              Thêm\n            ")])]),t._v(" "),a("div",[a("form",{staticClass:"input-group",on:{submit:function(e){return e.preventDefault(),t.searchUp()}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"Tìm kiếm..."},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._v(" "),t._m(1)])])])]),t._v(" "),a("table",{staticClass:"table table-hover"},[a("caption",[t._v("\n          List of partner\n        ")]),t._v(" "),t._m(2),t._v(" "),a("tbody",[t.isLoading?a("tr",{staticClass:"text-center"},[t._m(3)]):t._l(t.partners.data,function(e,s){return a("tr",{key:s},[a("th",{attrs:{scope:"row"}},[t._v(t._s(++s))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",{staticClass:"text-info font-weight-bold"},[t._v(t._s(e.email))]),t._v(" "),a("td",{staticClass:"text-center"},[a("img",{staticClass:"rounded-circle img-fulid",attrs:{src:t.getUrlImage(e.avatar),width:"30"}})]),t._v(" "),a("td",[t._v(t._s(e.phone_number))]),t._v(" "),a("td",[t._v(t._s(e.address))]),t._v(" "),a("td",[a("span",{staticClass:"badge badge-info"},[t._v("\n                "+t._s(e.role.role_name)+"\n              ")])]),t._v(" "),a("td",[1==e.is_active?a("span",{staticClass:"badge badge-success"},[t._v("\n                Active\n              ")]):a("span",{staticClass:"badge badge-danger"},[t._v("\n                Blocked\n              ")])]),t._v(" "),a("td",{staticClass:"text-center"},[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",value:"0",id:t.fetchNameCheck(e)},domProps:{checked:1===e.is_active},on:{change:function(a){return t.onChangeStatus(a,e)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:t.fetchNameCheck(e)}})])]),t._v(" "),a("td",{staticClass:"text-center"},[a("a",{staticClass:"mr-2",attrs:{href:"#"},on:{click:function(a){return t.updateModal(e)}}},[a("i",{staticClass:"menu-icon icon-pencil text-info"})]),t._v(" "),a("a",{staticClass:"ml-2",attrs:{href:"#"},on:{click:function(a){return t.deleteModal(e)}}},[a("i",{staticClass:"menu-icon icon-bin2 text-danger"})])])])})],2)]),t._v(" "),a("paginate",{attrs:{"page-count":null==t.partners.last_page?1:t.partners.last_page,"click-handler":t.clickPaginate,"prev-text":"Prev","next-text":"Next","container-class":"pagination justify-content-end","page-class":"page-item","page-link-class":"page-link","prev-class":"page-item","prev-link-class":"page-link","next-class":"page-item","next-link-class":"page-link"}})],1)]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modalPartner",tabindex:"-1",role:"dialog","aria-labelledby":"modalTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"modal-title",attrs:{id:"modalTitle"}},[t._v("\n            Thêm đối tác\n          ")]),t._v(" "),a("h5",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"modal-title",attrs:{id:"modalTitle"}},[t._v("\n            Cập nhật đối tác\n          ")]),t._v(" "),t._m(4)]),t._v(" "),a("form",{on:{submit:function(e){e.preventDefault(),t.editMode?t.updatePartner():t.createPartner()}}},[a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.valid;return[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Tên")]),t._v(" "),a("ValidationProvider",{attrs:{name:"name",rules:"required|max:255"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",class:{"is-invalid":s[0]},attrs:{type:"text",placeholder:"Nhập tên"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("Email")]),t._v(" "),a("ValidationProvider",{attrs:{name:"email",rules:"required|email|max:255"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",class:{"is-invalid":s[0]},attrs:{type:"email",disabled:t.editMode,placeholder:"Nhập email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("Số điện thoại")]),t._v(" "),a("ValidationProvider",{attrs:{name:"phone number",rules:"required|min:3|max:12"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNumber,expression:"phoneNumber"}],staticClass:"form-control",class:{"is-invalid":s[0]},attrs:{type:"text",placeholder:"Nhập số điện thoại"},domProps:{value:t.phoneNumber},on:{input:function(e){e.target.composing||(t.phoneNumber=e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("Địa chỉ")]),t._v(" "),a("ValidationProvider",{attrs:{name:"address",rules:"required|max:255"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",class:{"is-invalid":s[0]},attrs:{type:"text",placeholder:"Nhập địa chỉ"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("Mô tả")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nhập mô tả"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.closeModal()}}},[t._v("\n                Huỷ\n              ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!s}},[t.loadingButton?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n                Thêm\n              ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!s}},[t.loadingButton?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n                Cập nhật\n              ")])])]}}])})],1)])])]),t._v(" "),a("submit-delete-modal",[a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n        Huỷ\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submitDelete}},[t.loadingButton?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n        Có\n      ")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h5",{staticClass:"card-title"},[this._v("Danh sách đối tác")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-light",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-search"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("STT")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Tên")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Email")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Ảnh đại diện")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Số diện thoại")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Địa chỉ")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Quyền")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Status")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Active")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Tuỳ chọn")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{colspan:"10"}},[e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var i=function(t){a("vxuM")},r=a("VU/8")(s.a,n,!1,i,null,null);e.default=r.exports},uXU2:function(t,e,a){"use strict";(function(t){var s=a("Xxa5"),n=a.n(s),i=a("exGp"),r=a.n(i),o=a("Dd8w"),l=a.n(o),c=a("NYxO"),d=a("IcnI");e.a={data:function(){return{editMode:!1,loadingButton:!1,searchText:"",name:"",email:"",phoneNumber:"",address:"",description:""}},created:function(){d.a.dispatch("partner/PARTNERS_FETCH")},computed:l()({},Object(c.c)("partner",["partners","errors","isLoading"])),methods:l()({},Object(c.b)("partner",["PARTNER_CREATE","PARTNER_UPDATE","PARTNER_DELETE","PARTNERS_SEARCH","PARTNERS_PAGINATE","PARTNER_CHANGE_STATUS"]),{fetchNameCheck:function(t){return"checkbox_"+t.id},onChangeStatus:function(t,e){var a=0;!0===t.target.checked&&(a=1);var s={id:e.id,is_active:a};this.PARTNER_CHANGE_STATUS(s)},getUrlImage:function(t){return"https://storage.googleapis.com/cdio-cots.appspot.com/uploads/users/"+t},clickPaginate:function(t){this.PARTNERS_PAGINATE(t)},searchUp:function(){this.PARTNERS_SEARCH(this.searchText)},newModal:function(){this.editMode=!1,this.name="",this.email="",this.phoneNumber="",this.address="",this.description="",t("#modalPartner").modal("show")},closeModal:function(){this.editMode=!1,this.name="",this.email="",this.phoneNumber="",this.address="",this.description="",t("#modalPartner").modal("hide")},updateModal:function(e){this.editMode=!0,this.name=e.name,this.email=e.email,this.phoneNumber=e.phone_number,this.address=e.address,this.description=e.description,this.id=e.id,t("#modalPartner").modal("show")},deleteModal:function(e){this.id=e.id,t(".submit__delete__modal").modal("show")},createPartner:function(){var e=this;return r()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loadingButton=!0,s={name:e.name,email:e.email,phone_number:e.phoneNumber,address:e.address,description:e.description},a.prev=2,a.next=5,e.PARTNER_CREATE(s);case 5:t("#modalPartner").modal("hide"),e.loadingButton=!1,e.$toast.success({color:"#51A351",title:"Success!",message:"Thêm đối tác thành công"}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),t("#modalPartner").modal("hide"),e.loadingButton=!1,e.$toast.error({color:"#BD362F",title:"Error!",message:e.errors.email[0]});case 15:case"end":return a.stop()}},a,e,[[2,10]])}))()},updatePartner:function(){var e=this;return r()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loadingButton=!0,s={id:e.id,updatedFields:{name:e.name,phone_number:e.phoneNumber,address:e.address,description:e.description}},a.prev=2,a.next=5,e.PARTNER_UPDATE(s);case 5:t("#modalPartner").modal("hide"),e.loadingButton=!1,e.$toast.success({color:"#51A351",title:"Success!",message:"Cập nhật đối tác thành công"}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),t("#modalPartner").modal("hide"),e.loadingButton=!1,e.$toast.error({color:"#BD362F",title:"Error!",message:"Cập nhật đối tác thất bại"});case 15:case"end":return a.stop()}},a,e,[[2,10]])}))()},submitDelete:function(){var e=this;return r()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loadingButton=!0,a.prev=1,a.next=4,e.PARTNER_DELETE(e.id);case 4:t(".submit__delete__modal").modal("hide"),e.loadingButton=!1,e.$toast.success({color:"#51A351",title:"Success!",message:"Xoá quyền thành công"}),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(1),t(".submit__delete__modal").modal("hide"),e.loadingButton=!1,e.$toast.error({color:"#BD362F",title:"Error!",message:"Xoá quyền thất bại"});case 14:case"end":return a.stop()}},a,e,[[1,9]])}))()}})}}).call(e,a("7t+N"))},vxuM:function(t,e){}});
//# sourceMappingURL=8.5234307cf099540e3c67.js.map